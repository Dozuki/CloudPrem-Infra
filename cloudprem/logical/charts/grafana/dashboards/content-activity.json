{
   "annotations": {
      "list": [
         {
            "builtIn": 1,
            "datasource": "default",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
         }
      ]
   },
   "editable": true,
   "gnetId": null,
   "graphTooltip": 0,
   "id": null,
   "iteration": 1547769186635,
   "links": [],
   "panels": [
      {
         "content": "# Content Activity\nUser activity on guides, wikis, and categories.",
         "gridPos": {
            "h": 3,
            "w": 12,
            "x": 0,
            "y": 0
         },
         "id": 2,
         "links": [],
         "mode": "markdown",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "collapsed": false,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 3
         },
         "id": 8,
         "panels": [],
         "title": "",
         "type": "row"
      },
      {
         "content": "<h1>Monthly Overview\n<hr>",
         "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 4
         },
         "id": 28,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "cacheTimeout": null,
         "colorBackground": false,
         "colorValue": true,
         "colors": [
            "#20a7a3",
            "#20a7a3",
            "#20a7a3"
         ],
         "datasource": "$GUIDE_DB",
         "format": "none",
         "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
         },
         "gridPos": {
            "h": 3,
            "w": 6,
            "x": 0,
            "y": 7
         },
         "id": 10,
         "interval": null,
         "links": [],
         "mappingType": 1,
         "mappingTypes": [
            {
               "name": "value to text",
               "value": 1
            },
            {
               "name": "range to text",
               "value": 2
            }
         ],
         "maxDataPoints": 100,
         "nullPointMode": "connected",
         "nullText": null,
         "postfix": "",
         "postfixFontSize": "50%",
         "prefix": "",
         "prefixFontSize": "50%",
         "rangeMaps": [
            {
               "from": "null",
               "text": "N/A",
               "to": "null"
            }
         ],
         "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
         },
         "tableColumn": "count(*)",
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT -- date(FROM_UNIXTIME(user_history.date)) AS date_group,\n       count(*)\nFROM user_history\n\n\n-- SELECT guideid as \"Guide ID\", percent as \"Percentage\"\n-- from guide_authors \nwhere \nuser_history.event = 'new_guide'\n\nand year(FROM_UNIXTIME(user_history.date)) = year(CURRENT_TIME)\nand month(FROM_UNIXTIME(user_history.date)) = month(CURRENT_TIME)",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": "",
         "title": "New Guides This Month",
         "transparent": true,
         "type": "singlestat",
         "valueFontSize": "100%",
         "valueMaps": [
            {
               "op": "=",
               "text": "N/A",
               "value": "null"
            }
         ],
         "valueName": "avg"
      },
      {
         "cacheTimeout": null,
         "colorBackground": false,
         "colorValue": true,
         "colors": [
            "#20a7a3",
            "#20a7a3",
            "#20a7a3"
         ],
         "datasource": "$GUIDE_DB",
         "format": "none",
         "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
         },
         "gridPos": {
            "h": 3,
            "w": 6,
            "x": 6,
            "y": 7
         },
         "id": 11,
         "interval": null,
         "links": [],
         "mappingType": 1,
         "mappingTypes": [
            {
               "name": "value to text",
               "value": 1
            },
            {
               "name": "range to text",
               "value": 2
            }
         ],
         "maxDataPoints": 100,
         "nullPointMode": "connected",
         "nullText": null,
         "postfix": "",
         "postfixFontSize": "50%",
         "prefix": "",
         "prefixFontSize": "50%",
         "rangeMaps": [
            {
               "from": "null",
               "text": "N/A",
               "to": "null"
            }
         ],
         "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
         },
         "tableColumn": "Views",
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT sum(std.value) AS 'Views'\n\nfrom stats_per_day std\t\t\t\t     \nwhere \nstd.key <= DAY(CURRENT_TIME)\nand \nstd.type ='guide'\nORDER BY `Views` DESC\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": "",
         "title": "Monthly Guide Views",
         "transparent": true,
         "type": "singlestat",
         "valueFontSize": "100%",
         "valueMaps": [
            {
               "op": "=",
               "text": "N/A",
               "value": "null"
            }
         ],
         "valueName": "avg"
      },
      {
         "cacheTimeout": null,
         "colorBackground": false,
         "colorValue": true,
         "colors": [
            "#20a7a3",
            "#20a7a3",
            "#20a7a3"
         ],
         "datasource": "$GUIDE_DB",
         "format": "none",
         "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
         },
         "gridPos": {
            "h": 3,
            "w": 6,
            "x": 12,
            "y": 7
         },
         "id": 12,
         "interval": null,
         "links": [],
         "mappingType": 1,
         "mappingTypes": [
            {
               "name": "value to text",
               "value": 1
            },
            {
               "name": "range to text",
               "value": 2
            }
         ],
         "maxDataPoints": 100,
         "nullPointMode": "connected",
         "nullText": null,
         "postfix": "",
         "postfixFontSize": "50%",
         "prefix": "",
         "prefixFontSize": "50%",
         "rangeMaps": [
            {
               "from": "null",
               "text": "N/A",
               "to": "null"
            }
         ],
         "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
         },
         "tableColumn": "Views",
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT sum(std.value) AS 'Views'\n\nfrom stats_per_day std\t\t\t\t     \nwhere \nstd.key <= DAY(CURRENT_TIME)\nand \nstd.type ='TOPIC'\nORDER BY `Views` DESC\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": "",
         "title": "Monthly Category Views",
         "transparent": true,
         "type": "singlestat",
         "valueFontSize": "100%",
         "valueMaps": [
            {
               "op": "=",
               "text": "N/A",
               "value": "null"
            }
         ],
         "valueName": "avg"
      },
      {
         "cacheTimeout": null,
         "colorBackground": false,
         "colorValue": true,
         "colors": [
            "#20a7a3",
            "#20a7a3",
            "#20a7a3"
         ],
         "datasource": "$GUIDE_DB",
         "format": "none",
         "gauge": {
            "maxValue": 100,
            "minValue": 0,
            "show": false,
            "thresholdLabels": false,
            "thresholdMarkers": true
         },
         "gridPos": {
            "h": 3,
            "w": 6,
            "x": 18,
            "y": 7
         },
         "id": 13,
         "interval": null,
         "links": [],
         "mappingType": 1,
         "mappingTypes": [
            {
               "name": "value to text",
               "value": 1
            },
            {
               "name": "range to text",
               "value": 2
            }
         ],
         "maxDataPoints": 100,
         "nullPointMode": "connected",
         "nullText": null,
         "postfix": "",
         "postfixFontSize": "50%",
         "prefix": "",
         "prefixFontSize": "50%",
         "rangeMaps": [
            {
               "from": "null",
               "text": "N/A",
               "to": "null"
            }
         ],
         "sparkline": {
            "fillColor": "rgba(31, 118, 189, 0.18)",
            "full": false,
            "lineColor": "rgb(31, 120, 193)",
            "show": false
         },
         "tableColumn": "Views",
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT sum(std.value) AS 'Views'\n\nfrom stats_per_day std\t\t\t\t     \nwhere \nstd.key <= DAY(CURRENT_TIME)\nand \nstd.type ='wiki'\nORDER BY `Views` DESC\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": "",
         "title": "Monthly Wiki Views",
         "transparent": true,
         "type": "singlestat",
         "valueFontSize": "100%",
         "valueMaps": [
            {
               "op": "=",
               "text": "N/A",
               "value": "null"
            }
         ],
         "valueName": "avg"
      },
      {
         "collapsed": false,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 10
         },
         "id": 6,
         "panels": [],
         "title": "",
         "type": "row"
      },
      {
         "content": "<h1>New Guides\n<hr>",
         "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 11
         },
         "id": 29,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "aliasColors": {
            "New Guides": "#6990ad"
         },
         "bars": true,
         "dashLength": 10,
         "dashes": false,
         "datasource": "$GUIDE_DB",
         "decimals": 0,
         "fill": 1,
         "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 14
         },
         "id": 15,
         "legend": {
            "alignAsTable": false,
            "avg": true,
            "current": false,
            "hideEmpty": true,
            "hideZero": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": false,
            "total": true,
            "values": true
         },
         "lines": false,
         "linewidth": 5,
         "links": [],
         "nullPointMode": "null as zero",
         "percentage": false,
         "pointradius": 5,
         "points": false,
         "renderer": "flot",
         "seriesOverrides": [
            {
               "alias": "/20/",
               "color": "#6990ad"
            }
         ],
         "spaceLength": 10,
         "stack": false,
         "steppedLine": false,
         "targets": [
            {
               "alias": "",
               "format": "time_series",
               "group": [],
               "hide": false,
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT user_history.date as time, \n\n \nconcat(monthname(FROM_UNIXTIME(user_history.date)),\" \",year(FROM_UNIXTIME(user_history.date))) as metric,\n       count(historyid) as value\nFROM user_history\n\n\n-- SELECT guideid as \"Guide ID\", percent as \"Percentage\"\n-- from guide_authors \nwhere \nuser_history.event = 'new_guide'\n\nand\n\nCASE\nWHEN $USERID != 'All Users'\nTHEN user_history.userid = $USERID\nelse 1=1\nend\n\nand\n\nFROM_UNIXTIME(user_history.date) >= $__timeFrom()\n\n\nand \n\nFROM_UNIXTIME(user_history.date) <= $__timeTo()\n\nGROUP BY \n\nyear(FROM_UNIXTIME(user_history.date)), month(FROM_UNIXTIME(user_history.date))\n\n\n\n-- order by \n\n-- year(FROM_UNIXTIME(user_history.date)) asc, month(FROM_UNIXTIME(user_history.date))\n;\n",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": [],
         "timeFrom": null,
         "timeRegions": [],
         "timeShift": null,
         "title": "New Guides by Month",
         "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
         },
         "transparent": true,
         "type": "graph",
         "xaxis": {
            "buckets": null,
            "mode": "series",
            "name": null,
            "show": true,
            "values": [
               "total"
            ]
         },
         "yaxes": [
            {
               "decimals": 0,
               "format": "locale",
               "label": "New Guides",
               "logBase": 1,
               "max": null,
               "min": "0",
               "show": true
            },
            {
               "format": "short",
               "label": null,
               "logBase": 1,
               "max": null,
               "min": null,
               "show": false
            }
         ],
         "yaxis": {
            "align": false,
            "alignLevel": null
         }
      },
      {
         "content": "<hr>",
         "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 25
         },
         "id": 32,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "columns": [],
         "datasource": "$GUIDE_DB",
         "fontSize": "100%",
         "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 27
         },
         "id": 17,
         "links": [],
         "pageSize": null,
         "scroll": true,
         "showHeader": true,
         "sort": {
            "col": 0,
            "desc": true
         },
         "styles": [
            {
               "alias": "Date",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "MMMM D, YYYY",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "date_group",
               "thresholds": [],
               "type": "date",
               "unit": "short"
            },
            {
               "alias": "User",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "username",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "decimals": 0,
               "pattern": "/.*/",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            }
         ],
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT DATE_FORMAT(FROM_UNIXTIME(user_history.date), \"%M-%Y\") AS date_group, global_users.username, \n       count(historyid) as \"New Guides\"\nFROM user_history\nleft join global_users on global_users.userid = user_history.userid\n\n-- SELECT guideid as \"Guide ID\", percent as \"Percentage\"\n-- from guide_authors \nwhere \nuser_history.event = 'new_guide'\n-- and\n-- userid= {USERID}\nand\n\nCASE\nWHEN $USERID != 'All Users'\nTHEN user_history.userid = $USERID\nelse 1=1\nend\n\nand\n\n\ndate(FROM_UNIXTIME(user_history.date)) >= $__timeFrom()\n\n\nand \n\n\ndate(FROM_UNIXTIME(user_history.date)) <= $__timeTo()\n\n\nGROUP BY user_history.userid, DATE_FORMAT(FROM_UNIXTIME(user_history.date), \"%M-%Y\")\n\norder by year(FROM_UNIXTIME(user_history.date)) desc, month(FROM_UNIXTIME(user_history.date)) desc, day(date_group) desc, user_history.userid;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "title": "New Guides by User",
         "transform": "table",
         "transparent": true,
         "type": "table"
      },
      {
         "collapsed": false,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 36
         },
         "id": 4,
         "panels": [],
         "title": "",
         "type": "row"
      },
      {
         "content": "<h1>Guide Edits\n<hr>",
         "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 37
         },
         "id": 30,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "aliasColors": {
            "Edits": "#6990ad",
            "New Guides": "#20a7a3"
         },
         "bars": true,
         "dashLength": 10,
         "dashes": false,
         "datasource": "$GUIDE_DB",
         "decimals": 0,
         "fill": 1,
         "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 40
         },
         "id": 18,
         "legend": {
            "avg": true,
            "current": false,
            "hideEmpty": true,
            "hideZero": true,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": false,
            "total": true,
            "values": true
         },
         "lines": false,
         "linewidth": 5,
         "links": [],
         "nullPointMode": "null",
         "percentage": false,
         "pointradius": 5,
         "points": false,
         "renderer": "flot",
         "seriesOverrides": [
            {
               "alias": "/20/",
               "color": "#6990ad"
            }
         ],
         "spaceLength": 10,
         "stack": false,
         "steppedLine": true,
         "targets": [
            {
               "alias": "",
               "format": "time_series",
               "group": [],
               "hide": false,
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT gr.date as time_sec, \n\n-- \"Edits\" as metric,\nconcat(monthname(FROM_UNIXTIME(gr.date)),\" \", year(FROM_UNIXTIME(gr.date))) as metric,\n\n       count(gr.guide_revisionid) as value\nFROM guide_revisions gr\n\n-- left JOIN guide_current gc on (gc.guide_revisionid=gr.guide_revisionid)\n-- left JOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid) and (gc.guide_revisionid=gr.guide_revisionid)\n-- left JOIN guide_text gt ON (gt.gt_revisionid = gr.gt_revisionid) and (gc.guide_revisionid=gr.guide_revisionid)\n\n\n\n-- SELECT guideid as \"Guide ID\", percent as \"Percentage\"\n-- from guide_authors \nwhere \n\n\nCASE\nWHEN $GUIDE_ID != 'All Guides'\nTHEN gr.guideid = $GUIDE_ID\nelse 1=1\nend\n\nand\n\nFROM_UNIXTIME(gr.date) >= $__timeFrom()\n\nand \n\nFROM_UNIXTIME(gr.date) <= $__timeTo()\n\nGROUP BY \n\n\nyear(FROM_UNIXTIME(gr.date)), month(FROM_UNIXTIME(gr.date))\n\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": [],
         "timeFrom": null,
         "timeRegions": [],
         "timeShift": null,
         "title": "Guide Edits by Month",
         "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
         },
         "transparent": true,
         "type": "graph",
         "xaxis": {
            "buckets": null,
            "mode": "series",
            "name": null,
            "show": true,
            "values": [
               "total"
            ]
         },
         "yaxes": [
            {
               "decimals": null,
               "format": "locale",
               "label": "Recent Edits to Guides",
               "logBase": 1,
               "max": null,
               "min": null,
               "show": true
            },
            {
               "format": "none",
               "label": null,
               "logBase": 1,
               "max": null,
               "min": null,
               "show": false
            }
         ],
         "yaxis": {
            "align": false,
            "alignLevel": null
         }
      },
      {
         "content": "<hr>",
         "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 51
         },
         "id": 33,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "columns": [],
         "datasource": "$GUIDE_DB",
         "fontSize": "100%",
         "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 53
         },
         "id": 20,
         "links": [],
         "pageSize": null,
         "scroll": true,
         "showHeader": true,
         "sort": {
            "col": 0,
            "desc": true
         },
         "styles": [
            {
               "alias": "Time",
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "pattern": "Time",
               "type": "date"
            },
            {
               "alias": "Title",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "title",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            },
            {
               "alias": "Date",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "MMMM D, YYYY",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "date_group",
               "thresholds": [],
               "type": "date",
               "unit": "short"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "Guide ID",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "Edits",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "decimals": 2,
               "pattern": "/.*/",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            }
         ],
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT DATE_FORMAT(FROM_UNIXTIME(gr.date), \"%M-%Y\") AS date_group, \n\nCASE\nWHEN a.guide_revisionid != ''\nTHEN a.title\nelse \"Deleted Guide\"\nend\nas title\n, \n\ngr.guideid as \"Guide ID\",\n       count(gr.guide_revisionid) as Edits\n\n\n\nFROM guide_revisions gr\n\n \n-- left JOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid) and (gc.guide_revisionid=gr.guide_revisionid)\n\nleft join \n(select guide_text.title, \n -- guide_text.gt_revisionid, \nguide_current.guide_revisionid, \n guide_revisions.guideid  \n \n from guide_current\n \nleft join guide_revisions on guide_current.guide_revisionid= guide_revisions.guide_revisionid\n \nleft join guide_text on guide_text.gt_revisionid = guide_revisions.gt_revisionid) \n \n a on a.guideid = gr.guideid\n\t\t   \n\t\t   \n\t\t   \nleft JOIN guide_text gt ON (gt.gt_revisionid = gr.gt_revisionid)\n\n-- left JOIN global_users on gm.userid = global_users.userid\n\n\nwhere \n\nCASE\nWHEN $GUIDE_ID != 'All Guides'\nTHEN gr.guideid = $GUIDE_ID\nelse 1=1\nend\n\n\nand \n\n\ndate(FROM_UNIXTIME(gr.date)) >= $__timeFrom()\n\nand \n\n\ndate(FROM_UNIXTIME(gr.date)) <= $__timeTo()\n\n\n\n\n\n\nGROUP BY gr.guideid,\n\ndate_group\n\norder by year(FROM_UNIXTIME(gr.date)) desc, month(FROM_UNIXTIME(gr.date)) desc\n\n\n\n\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "title": "Guide Edits Over Time",
         "transform": "table",
         "transparent": true,
         "type": "table"
      },
      {
         "collapsed": false,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 62
         },
         "id": 23,
         "panels": [],
         "title": "",
         "type": "row"
      },
      {
         "content": "<h1>Content Views\n<hr>",
         "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 63
         },
         "id": 31,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "aliasColors": {
            "Category Views": "#fac069",
            "Guide Views": "#6990ad",
            "New Guides": "#20a7a3",
            "WIKI Views": "#756588"
         },
         "bars": true,
         "dashLength": 10,
         "dashes": false,
         "datasource": "$GUIDE_DB",
         "decimals": 0,
         "fill": 1,
         "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 66
         },
         "hideTimeOverride": false,
         "id": 21,
         "legend": {
            "alignAsTable": false,
            "avg": false,
            "current": false,
            "hideEmpty": true,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": false
         },
         "lines": false,
         "linewidth": 5,
         "links": [],
         "nullPointMode": "null",
         "percentage": false,
         "pointradius": 5,
         "points": false,
         "renderer": "flot",
         "seriesOverrides": [],
         "spaceLength": 10,
         "stack": false,
         "steppedLine": false,
         "targets": [
            {
               "alias": "",
               "format": "time_series",
               "group": [],
               "hide": false,
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT timestamp(concat(stm.year,\"-\",stm.key,\"-\",\"2\"), \"00:00:00\") as time, \n-- stm.year, stm.key, \nsum(stm.value) AS value, \"Guide Views\" as metric\n\nFROM stats_per_month stm\nWHERE\nmetric = 'hits'\nAND type = 'guide'\n\nAND id IN (\n   SELECT gc.guideid\n   FROM guide_current gc\n   JOIN guide_revisions gr USING (guide_revisionid)\n   JOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid)\n)\n\nand\n\nstm.year >= year($__timeFrom())\n\nand \n\nstm.year <= year($__timeTo())\n\n-- and\n\n-- CASE \n-- WHEN stm.year = year($__timeTo()) \n-- THEN stm.key <= month($__timeTo())\n-- else 1=1\n-- end\n\n-- and \n\n-- CASE \n-- WHEN stm.year = year($__timeFrom())\n-- THEN stm.key >= month($__timeFrom())\n-- else 1=1\n-- end\n\n\n\nGROUP BY stm.year, stm.key\n",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            },
            {
               "alias": "",
               "format": "time_series",
               "group": [],
               "hide": false,
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT timestamp(concat(stm.year,\"-\",stm.key,\"-\",\"2\"), \"00:00:00\") as time, \n-- stm.year, stm.key, \nsum(stm.value) AS value, \"Category Views\" as metric\n\nFROM stats_per_month stm\nWHERE\nmetric = 'hits'\nAND type = 'TOPIC'\nAND id IN (\n   SELECT gc.guideid\n   FROM guide_current gc\n   JOIN guide_revisions gr USING (guide_revisionid)\n   JOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid)\n)\n\nand\n\nstm.year >= year($__timeFrom())\n\nand \n\nstm.year <= year($__timeTo())\n\nand\n\nCASE \nWHEN stm.year = year($__timeTo()) \nTHEN stm.key <= month($__timeTo())\nelse 1=1\nend\n\nand \n\nCASE \nWHEN stm.year = year($__timeFrom())\nTHEN stm.key >= month($__timeFrom())\nelse 1=1\nend\n\n\nGROUP BY stm.year, stm.key\n",
               "refId": "B",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            },
            {
               "alias": "",
               "format": "time_series",
               "group": [],
               "hide": false,
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT timestamp(concat(stm.year,\"-\",stm.key,\"-\",\"2\"), \"00:00:00\") as time, \n-- stm.year, stm.key, \nsum(stm.value) AS value, \"WIKI Views\" as metric\n\nFROM stats_per_month stm\nWHERE\nmetric = 'hits'\nAND type = 'WIKI'\nAND id IN (\n   SELECT gc.guideid\n   FROM guide_current gc\n   JOIN guide_revisions gr USING (guide_revisionid)\n   JOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid)\n)\n\nand\n\nstm.year >= year($__timeFrom())\n\nand \n\nstm.year <= year($__timeTo())\n\n\nand\nCASE \nWHEN stm.year = year($__timeTo()) \nTHEN stm.key <= month($__timeTo())\nelse 1=1\nend\n\nand \n\nCASE \nWHEN stm.year = year($__timeFrom())\nTHEN stm.key >= month($__timeFrom())\nelse 1=1\nend\n\nGROUP BY stm.year, stm.key\n",
               "refId": "C",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "thresholds": [],
         "timeFrom": null,
         "timeRegions": [],
         "timeShift": null,
         "title": "Total Views by Month",
         "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
         },
         "transparent": true,
         "type": "graph",
         "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
         },
         "yaxes": [
            {
               "decimals": 0,
               "format": "locale",
               "label": "Views",
               "logBase": 1,
               "max": null,
               "min": "0",
               "show": true
            },
            {
               "format": "short",
               "label": null,
               "logBase": 1,
               "max": null,
               "min": null,
               "show": false
            }
         ],
         "yaxis": {
            "align": false,
            "alignLevel": null
         }
      },
      {
         "content": "<hr>",
         "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 77
         },
         "id": 34,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "columns": [],
         "datasource": "$GUIDE_DB",
         "fontSize": "100%",
         "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 79
         },
         "id": 25,
         "links": [],
         "pageSize": null,
         "scroll": true,
         "showHeader": true,
         "sort": {
            "col": null,
            "desc": false
         },
         "styles": [
            {
               "alias": "Time",
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "pattern": "Time",
               "type": "date"
            },
            {
               "alias": "Title",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "title",
               "thresholds": [],
               "type": "string",
               "unit": "short"
            },
            {
               "alias": "Guide ID",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "guideid",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "MMMM YYYY",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "Month",
               "thresholds": [],
               "type": "string",
               "unit": "short"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "Views",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "decimals": 2,
               "pattern": "/.*/",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            }
         ],
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT\n a.title, a.guideid, concat(MONTHNAME(STR_TO_DATE(stm.key, '%m')),\" , \",stm.year) as \"Month\",\n\n\t   stm.value AS 'Views'\nFROM\n(SELECT gc.guideid, \n \t\tfrom_unixtime(gm.published_date,'%Y-%m-%d') AS 'published_date',\n\t   gm.device,\n \t   group_concat(distinct(if(gt.langid='en',gt.thing,NULL))) AS 'thing',\n\t   group_concat(distinct(if(gt.langid='en',gt.title,NULL))) AS 'title'\nFROM guide_current gc\nJOIN guide_revisions gr on gr.guide_revisionid = gc.guide_revisionid\nJOIN guide_meta gm ON (gr.gtr_revisionid = gm.revisionid)\nJOIN guide_text gt ON (gt.gt_revisionid = gr.gt_revisionid)\n\nGROUP BY gc.guideid\nORDER BY gc.guideid desc) a\n\nJOIN stats_per_month stm ON (stm.id = a.guideid AND \n\t\t\t\t\t\t     stm.metric='hits' AND stm.type='guide')\n\t\t\t\t\t\t     \nwhere \n\n\nCASE\nWHEN $GUIDE_ID != 'All Guides'\nTHEN a.guideid = $GUIDE_ID\nelse 1=1\nend\n\n\nand \nstm.year >= year($__timeFrom())\n\nand \n\nstm.year <= year($__timeTo())\n\nand \n\nCASE \nWHEN stm.year = year($__timeTo()) \nTHEN stm.key <= month($__timeTo())\nelse 1=1\nend\n\nand \n\nCASE \nWHEN stm.year = year($__timeFrom())\nTHEN stm.key >= month($__timeFrom())\nelse 1=1\nend\n\n\n\n\n\n\nand\n\n-- stm.key <= MONTH(CURRENT_TIME)\n-- and stm.year = Year(CURRENT_TIME)\n-- and \nstm.key <> 0\nand stm.value <> 0\nGROUP BY a.guideid, concat(MONTHNAME(STR_TO_DATE(stm.key, '%m')),\" , \",stm.year) \nORDER BY stm.year desc, stm.key desc, a.guideid\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "title": "Views by Guide",
         "transform": "table",
         "transparent": true,
         "type": "table"
      },
      {
         "content": "<hr>",
         "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 90
         },
         "id": 35,
         "links": [],
         "mode": "html",
         "title": "",
         "transparent": true,
         "type": "text"
      },
      {
         "columns": [],
         "datasource": "$GUIDE_DB",
         "fontSize": "100%",
         "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 92
         },
         "id": 26,
         "links": [],
         "pageSize": null,
         "scroll": true,
         "showHeader": true,
         "sort": {
            "col": 1,
            "desc": false
         },
         "styles": [
            {
               "alias": "Time",
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "pattern": "Time",
               "type": "date"
            },
            {
               "alias": "Category Title",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "title",
               "thresholds": [],
               "type": "string",
               "unit": "short"
            },
            {
               "alias": "Guide ID",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "guideid",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "MMMM YYYY",
               "decimals": 2,
               "mappingType": 1,
               "pattern": "Month",
               "thresholds": [],
               "type": "string",
               "unit": "short"
            },
            {
               "alias": "Category Views",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "dateFormat": "YYYY-MM-DD HH:mm:ss",
               "decimals": 0,
               "mappingType": 1,
               "pattern": "Views",
               "thresholds": [],
               "type": "number",
               "unit": "none"
            },
            {
               "alias": "",
               "colorMode": null,
               "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
               ],
               "decimals": 2,
               "pattern": "/.*/",
               "thresholds": [],
               "type": "number",
               "unit": "short"
            }
         ],
         "targets": [
            {
               "alias": "",
               "format": "table",
               "group": [],
               "metricColumn": "none",
               "rawQuery": true,
               "rawSql": "SELECT\nw.title, concat(MONTHNAME(STR_TO_DATE(stm.key, '%m')),\" , \",stm.year) as \"Month\",\n\n\t   stm.value AS 'Views'\nFROM wikis w\nJOIN stats_per_month stm ON (stm.id = w.wikiid AND \n\t\t\t\t\t\t     stm.metric='hits' AND stm.type='topic')\n\t\t\t\t\t\t     \nwhere \nstm.key <> 0\nand stm.value <> 0\n\n\n\nand \nstm.year >= year($__timeFrom())\n\nand \n\nstm.year <= year($__timeTo())\n\nand \n\n\n\nCASE \n\tWHEN concat($CATEGORYID) = 'All Categories'\n\tTHEN 1 = 1 \n\tELSE w.title=$CATEGORYID\nEND\n\nand\n\nCASE \nWHEN stm.year = year($__timeTo()) \nTHEN stm.key <= month($__timeTo())\nelse 1=1\nend\n\nand \n\nCASE \nWHEN stm.year = year($__timeFrom())\nTHEN stm.key >= month($__timeFrom())\nelse 1=1\nend\n\n\nGROUP BY w.wikiid, concat(MONTHNAME(STR_TO_DATE(stm.key, '%m')),\" , \",stm.year) \nORDER BY stm.year desc, stm.key desc, w.wikiid\n;",
               "refId": "A",
               "select": [
                  [
                     {
                        "params": [
                           "value"
                        ],
                        "type": "column"
                     }
                  ]
               ],
               "timeColumn": "time",
               "where": [
                  {
                     "name": "$__timeFilter",
                     "params": [],
                     "type": "macro"
                  }
               ]
            }
         ],
         "title": "Views by Category",
         "transform": "table",
         "transparent": true,
         "type": "table"
      }
   ],
   "refresh": false,
   "schemaVersion": 16,
   "style": "dark",
   "tags": [
      "Content",
      "Content Activity"
   ],
   "templating": {
      "list": [
         {
            "current": {
               "text": "Dozuki",
               "value": "Dozuki"
            },
            "hide": 2,
            "label": "Guide Database",
            "name": "GUIDE_DB",
            "options": [],
            "query": "mysql",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
         },
         {
            "allValue": "'All Users'",
            "current": {
               "text": "All",
               "value": "$__all"
            },
            "datasource": "$GUIDE_DB",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "User",
            "multi": false,
            "name": "USERID",
            "options": [],
            "query": "select  CONCAT(global_users.username, \"  \", \"User ID:\", global_users.userid) AS __text, global_users.userid AS __value from global_users",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
         },
         {
            "allValue": "'All Guides'",
            "current": {
               "text": "All",
               "value": "$__all"
            },
            "datasource": "$GUIDE_DB",
            "definition": "select guide_text.guideid AS __value,  CONCAT(guide_text.title, \"  \", \"Guide ID:\", guide_text.guideid) AS __text   from (select max(gt_revisionid) as gt_revisionid, guideid from guide_text group by guideid) x  left join guide_text on guide_text.gt_revisionid=x.gt_revisionid",
            "hide": 0,
            "includeAll": true,
            "label": "Guide",
            "multi": false,
            "name": "GUIDE_ID",
            "options": [],
            "query": "select guide_text.guideid AS __value,  CONCAT(guide_text.title, \"  \", \"Guide ID:\", guide_text.guideid) AS __text   from (select max(gt_revisionid) as gt_revisionid, guideid from guide_text group by guideid) x  left join guide_text on guide_text.gt_revisionid=x.gt_revisionid",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
         },
         {
            "allValue": "'All Categories'",
            "current": {
               "text": "All Categories",
               "value": "All Categories"
            },
            "datasource": "$GUIDE_DB",
            "definition": "",
            "hide": 0,
            "includeAll": true,
            "label": "Category",
            "multi": false,
            "name": "CATEGORYID",
            "options": [],
            "query": "select  \"All Categories\", list.title as \"Category\" from (select distinct title from wikis where wikis.namespace=\"TOPIC\") list order by 'All Categories', title ASC",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
         }
      ]
   },
   "time": {
      "from": "now-2y",
      "to": "now"
   },
   "timepicker": {
      "refresh_intervals": [
         "5s",
         "10s",
         "30s",
         "1m",
         "5m",
         "15m",
         "30m",
         "1h",
         "2h",
         "1d"
      ],
      "time_options": [
         "5m",
         "15m",
         "1h",
         "6h",
         "12h",
         "24h",
         "2d",
         "7d",
         "30d"
      ]
   },
   "timezone": "utc",
   "title": "Content Activity",
   "uid": null,
   "version": 182
}
